#!/bin/bash
#SBATCH --job-name=SRA_accession
#SBATCH --time=0-24:00:00 # Wall clock time limit in Days-Hours:min:seconds
#SBATCH --output=SRA-%A_%a.out # output file
#SBATCH --error=SRA-%A_%a.err # error file
#SBATCH --ntasks=1 # Run 1 job
#SBATCH --ntasks-per-node=1 
#SBATCH --cpus-per-task=8 
#SBATCH --mem=100GB

#load required modules
module load sratoolkit

#make required directory and move to it
mkdir /hb/scratch/omoosman/sra && cd /hb/scratch/omoosman/sra

#prefetch accession into scratch
prefetch SRRXXXXXXXXXX --max-size 100g  -O /hb/scratch/omoosman/sra 

#convert to fastq from scratch directory 
fasterq-dump SRRXXXXXXXXXX   

#compress and copy files to correct directory
gzip /hb/scratch/omoosman/sra/SRRXXXXXXXXXX/*.fastq | cp /hb/home/omoosman/owen/zoarcoidei/data/raw_hifi/

